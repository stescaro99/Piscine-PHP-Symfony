{% extends 'base.html.twig' %}

{% block title %} {{parent()}} | Notifications{% endblock %}

{% block stylesheets %}
    {{parent()}}
    <link rel="stylesheet" href="{{ asset('css/notifications-page.css') }}">
{% endblock %}

{% block body %}
    {% include 'components/navbar.html.twig' %}
    {% include 'components/searchbar.html.twig' %}
    
    <div class="notifications-page-container">
        <div class="notifications-page-header">
            <div class="notifications-page-title">
                <div class="notifications-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5V17zM15 17H9a6 6 0 01-6-6V5a2 2 0 012-2h14a2 2 0 012 2v6a6 6 0 01-6 6z"/>
                    </svg>
                </div>
                <h1>Notifications</h1>
                <div class="notifications-count-badge">
                    {{ unreadCount }}
                </div>
            </div>
            <div class="notifications-actions">
                <button id="select-all-notifications" class="btn btn-secondary" title="Select/Deselect All">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor">
                        <polyline points="9,11 12,14 22,4"></polyline>
                        <path d="m21,3H3C1.895,3 1,3.895 1,5v14c0,1.105 0.895,2 2,2h18c1.105,0 2,-0.895 2,-2V5C23,3.895 22.105,3 21,3z"></path>
                    </svg>
                    Select All
                </button>
                <button id="delete-selected-notifications" class="btn btn-danger" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor">
                        <polyline points="3,6 5,6 21,6"></polyline>
                        <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
                        <line x1="10" y1="11" x2="10" y2="17"></line>
                        <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                    Delete Selected (<span id="selected-count">0</span>)
                </button>
                <a href="/userpage/{{ user.id }}" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m7-7l-7 7 7 7"/>
                    </svg>
                    Back to Home
                </a>
            </div>
        </div>
        
        <div class="notifications-content">
            {% if notifications is not empty %}
                <div class="notifications-list-modern">
                    {% for notification in notifications %}
                        <div class="notification-card" data-index="{{ loop.index0 }}">
                            <div class="notification-checkbox">
                                <input type="checkbox" id="notification-{{ loop.index0 }}" class="notification-select" value="{{ loop.index0 }}">
                                <label for="notification-{{ loop.index0 }}" class="checkbox-label"></label>
                            </div>
                            <div class="notification-indicator"></div>
                            <div class="notification-details">
                                <div class="notification-message">
                                    {% if notification.link %}
                                        <a href="{{ notification.link }}" class="notification-link">{{ notification.message }}</a>
                                    {% else %}
                                        {{ notification.message ?? notification }}
                                    {% endif %}
                                </div>
                                <div class="notification-timestamp">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"/>
                                        <polyline points="12,6 12,12 16,14"/>
                                    </svg>
                                    <span>{{ notification.timestamp ?? 'Just now' }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
                <div class="notifications-pagination">
                    <div class="pagination-info">
                        Showing {{ notifications|length }} notifications
                    </div>
                    <div class="pagination-controls">
                    </div>
                </div>
            {% else %}
                <div class="notifications-empty-state">
                    <div class="empty-state-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                        </svg>
                    </div>
                    <h3>No notifications yet</h3>
                    <p>When you have new notifications, they'll appear here. Stay tuned for updates!</p>
                    <a href="/" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                        </svg>
                        Go to Dashboard
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <script src="{{ asset('js/notifications-page.js') }}"></script>
{% endblock %}
