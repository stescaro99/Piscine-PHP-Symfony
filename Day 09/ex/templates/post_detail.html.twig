{% if post %}
    <h4>{{ post.title }}</h4>
    <p>{{ post.content }}</p>
    <small>{{ post.created ? post.created|date('d/m/Y H:i') }}</small>
    <br>
    <form id="delete-post-form" action="/delete/{{ post.id }}" method="post" style="display:inline;">
        <button type="submit">{{ 'post.delete'|trans }}</button>
    </form>
    <script>
    document.getElementById('delete-post-form').addEventListener('submit', function(e) {
        e.preventDefault();
        if (confirm("{{ 'post.delete_confirm'|trans }}")) {
            fetch(this.action, {
                method: 'DELETE',
                headers: { 'X-Requested-With': 'XMLHttpRequest' }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/post';
                } else {
                    alert(data.error || "{{ 'post.delete_failed'|trans }}");
                }
            });
        }
    });
    </script>
{% else %}
    <p>{{ 'post.no_selected'|trans }}</p>
{% endif %}
